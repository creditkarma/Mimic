<script src="{{ site.baseurl }}/assets/js/prism.js"></script>
<script>
  const tag = "{{site.github.latest_release.name}}";
  var platform, file;
  switch (true) {
    case navigator.platform.startsWith("Linux"):
      platform = "Linux";
      file = `Mimic-${tag}-linux`;
      break;
    case navigator.platform.startsWith("Win"):
      platform = "Windows";
      file = `Mimic.${tag}.exe`;
      break;
    case navigator.platform.startsWith("Mac"):
      platform = "Mac";
      file = `Mimic-${tag}.dmg`;
      break;
  }
  const link = document.getElementById("download")
  if (platform && link) {
    link.innerHTML = `Download for ${platform}`;
    link.setAttribute("href", `https://github.com/creditkarma/Mimic/releases/download/v${tag}/${file}`)
  }
</script>
<script>
  const images = document.querySelectorAll(".image.playable");
  const preload = [];
  for (index = 0; index < images.length; index++) {
    const image = images[index];
    const link = image.getAttribute("src").split(".")[0];
    // Cache image
    preload[index] = new Image();
    preload[index].src = link + ".gif";
    image.setAttribute("src", link + ".png")
    // Handle clicks
    image.onclick = function() {
      const ext = this.getAttribute("src").split(".")[1];
      switch (ext) {
      case "png":
        this.setAttribute("src", link + ".gif")
        break;
      case "gif":
        this.setAttribute("src", link + ".png")
        break;
      }
    }
  } 
</script>
